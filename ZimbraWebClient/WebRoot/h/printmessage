<%@ page buffer="8kb" autoFlush="true" %>
<%@ page pageEncoding="UTF-8" contentType="text/html; charset=UTF-8" %>
<%@ taglib prefix="zm" uri="com.zimbra.zm" %>
<%@ taglib prefix="app" uri="com.zimbra.htmlclient" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib prefix="fmt" uri="com.zimbra.i18n" %>
<app:handleError>
<zm:getMailbox var="mailbox"/>
<c:choose>
	<c:when test="${not empty mailbox.prefs.locale}">
		<fmt:setLocale value='${mailbox.prefs.locale}' scope='request' />
	</c:when>
	<c:otherwise>
		<fmt:setLocale value='${pageContext.request.locale}' scope='request' />
	</c:otherwise>
</c:choose>
<fmt:setBundle basename="/messages/ZhMsg" scope="request"/>
<c:set var="messageIds" value="${fn:join(paramValues.id, ',')}"/>
<zm:computeSearchContext var="context" usecache="true"/>

</app:handleError>
<html>
<app:head mailbox="${mailbox}"/>
<body style='background-color:white;'>
<div class='ZhCallListPrintView'>
<table cellpadding="0" cellspacing="5"  width="100%">
	<tr>
		<td class='ZhZimbraTitle'><fmt:message key="zimbraTitle"/></td>
		<td nowrap width='1%'><b>${fn:escapeXml(mailbox.name)}</b></td>
	</tr>
<hr/>
<c:forEach items="${messageIds}" var="mid" varStatus="status">
<zm:getMessage var="message" id="${mid}" markread="false" neuterimages="${empty param.xim}"/>
	<tr>
		<td colspan="2">
			<div style="padding: 10px; font-size: 20px; font-weight: bold;">${zm:cook(message.subject)}</div><hr/>
		</td>
	</tr>
	<tr>
		<td colspan="2">
			<app:messagePrintView mailbox="${mailbox}" message="${message}" />
		</td>
	</tr>

</c:forEach>    
</table>

<c:if test="${empty messageIds}">
	<div class='NoResults'><fmt:message key="noResultsFound"/></div>
</c:if>
<script type="text/javascript">
	<!--
	window.print();
	// -->
</script>

</body>
</html>