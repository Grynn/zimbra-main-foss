<%@ page buffer="8kb" autoFlush="true" %>
<%@ page pageEncoding="UTF-8" contentType="text/html; charset=UTF-8" %>
<%@ taglib prefix="zm" uri="com.zimbra.zm" %>
<%@ taglib prefix="mo" uri="com.zimbra.mobileclient" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ taglib prefix="fn" uri="http://java.sun.com/jsp/jstl/functions" %>
<%@ taglib prefix="fmt" uri="com.zimbra.i18n" %>
<%@ taglib prefix="app" uri="com.zimbra.htmlclient" %>
<c:if test="${empty param.ajax}">
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<c:remove var="prevUrl" scope="session"/>
<c:remove var="currentUrl" scope="session"/>
</c:if>
<c:set var="baseURL" scope="request" value="${requestScope.baseURL!=null?requestScope.baseURL:'zmain'}"/>
<c:set var="context_url" value="${requestScope.baseURL}"/>
<c:if test="${param.loginOp=='logout'}">
    <c:redirect url="/?loginOp=logout&client=mobile"/>
</c:if>
<c:if test="${not empty param.ajax}">
    <c:set var="prevUrl" scope="session" value="${sessionScope.currentUrl}"/>
    <c:set var="currentUrl" scope="session"
           value="${pageContext.request.requestURL}?${pageContext.request.queryString}"/>
</c:if>
<c:set var="version" value="${initParam.zimbraCacheBusterVersion}"/>
<c:set var="uiv" value="1" scope="session"/>
<mo:handleError>
    <zm:getMailbox var="mailbox"/>
    <zm:getUserAgent var="ua" session="false"/>
    <c:choose>
        <c:when test="${not empty mailbox.prefs.locale}">
            <fmt:setLocale value='${mailbox.prefs.locale}' scope='request'/>
        </c:when>
        <c:otherwise>
            <fmt:setLocale value='${pageContext.request.locale}' scope='request'/>
        </c:otherwise>
    </c:choose>
    <fmt:setBundle basename="/messages/ZhMsg" scope="request"/>
    <mo:apptComposeCheck/>
    <mo:composeCheck/>
    <c:choose>
        <c:when test="${not empty param.doPrefsAction}">
            <zm:modifyPrefs var="updated">
                <zm:pref name="zimbraPrefTimeZoneId" value="${param.zimbraPrefTimeZoneId}"/>
                <c:if test="${mailbox.features.conversations}">
                    <zm:pref name="zimbraPrefGroupMailBy" value="${param.zimbraPrefGroupMailBy}"/>
                </c:if>
                <c:if test="${mailbox.features.initialSearchPreference}">
                    <zm:pref name="zimbraPrefMailInitialSearch" value="${param.zimbraPrefMailInitialSearch}"/>
                </c:if>
                <zm:pref name="zimbraPrefAutoAddAddressEnabled" value="${param.zimbraPrefAutoAddAddressEnabled eq 'TRUE' ? 'TRUE' : 'FALSE'}"/>
                <zm:pref name="zimbraPrefContactsPerPage" value="${param.zimbraPrefContactsPerPage}"/>
                <zm:pref name="zimbraPrefMailItemsPerPage" value="${param.zimbraPrefMailItemsPerPage}"/>
                <zm:pref name="zimbraPrefCalendarFirstdayOfWeek" value="${param.zimbraPrefCalendarFirstdayOfWeek}"/>
                <zm:pref name="zimbraPrefUseTimeZoneListInCalendar" value="${param.zimbraPrefUseTimeZoneListInCalendar eq 'TRUE' ? 'TRUE' : 'FALSE'}"/>
            </zm:modifyPrefs>
            <c:if test="${updated}">
                <zm:getMailbox var="mailbox" refreshaccount="${true}"/>
                <c:set var="limit" value="${mailbox.prefs.mailItemsPerPage}" scope="session"/>
                <zm:clearSearchCache />
                <app:status><fmt:message key="optionsSaved"/></app:status>
            </c:if>
        </c:when>
        <c:when test="${not empty param.doMessageAction}">
            <mo:messageAction/>
        </c:when>
        <c:when test="${not empty param.doBriefcaseAction}">
            <mo:briefcaseAction/>
        </c:when>
        <c:when test="${not empty param.doTaskAction}">
            <mo:taskAction/>
        </c:when>
        <c:when test="${not empty param.doContactAction}">
            <mo:contactAction/>
        </c:when>
        <c:when test="${not empty param.doFolderAction}">
            <mo:folderAction/>
        </c:when>
    </c:choose>
    <c:set var="action" value="${zm:cook(empty param.paction ? param.action : param.paction)}" scope="request"/>
</mo:handleError>
<c:if test="${empty sessionScope.zms}">
    <c:set value="${ua.isiPhone || ua.isiPod ? 'iphone' : ( ua.isIE ? 'wm6' : 'iphone')}" var="zms"
           scope="session"/>
</c:if>
<c:if test="${not empty param.zms}">
    <c:set value="${fn:escapeXml(param.zms)}" var="zms" scope="session"/>
</c:if>
<!-- SKIN param:'${param.zms}' '${sessionScope.zms}' -->
<c:if test="${sessionScope.limit == null}">
    <c:set var="limit" value="${sessionScope.zms eq 'xlite' ? '5' : mailbox.prefs.mailItemsPerPage}" scope="session"/>
</c:if>
<c:if test="${(sessionScope.limit != param.limit && param.limit != null && param.limit != '')  }">
    <c:set var="limit" value="${zm:cook(param.limit)}" scope="session"/>
</c:if>
<c:set var="aurl" value="${context_url}"/>
<%-- Access keys --%>
<c:set var="mailapp_accesskey" value="1" scope="request"/>
<c:set var="contactapp_accesskey" value="2" scope="request"/>
<c:set var="calapp_accesskey" value="3" scope="request"/>
<c:set var="fldrapp_accesskey" value="4" scope="request"/>
<c:set var="search_accesskey" value="5" scope="request"/>
<c:set var="navlink_accesskey" value="6" scope="request"/>
<c:set var="prev_accesskey" value="7" scope="request"/>
<c:set var="next_accesskey" value="8" scope="request"/>
<c:set var="mainaction_accesskey" value="0" scope="request"/>
<c:if test="${empty param.ajax}">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black" />    
<title>
    <fmt:message key="zimbraTitle"/>
</title>
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0;"/>
<c:set var="calcss" value=",${sessionScope.zms}-cal"/>
<link href="<c:url value='/css/${sessionScope.zms}${calcss}.css'/>" type="text/css" rel="stylesheet"/>
<c:if test="${empty param.djs}">
<script type="text/javascript">
    window.currentUrl = '${pageContext.request.requestURL}?ajax=true&${pageContext.request.queryString}';
    <c:import url="/m/mojs${(!empty param.debug || !empty param.dev) ? '?dev=1':''}"/>
</script>
<%--<script type="text/javascript" src="/m/mojs${!empty param.debug ? '?debug=1':''}"></script>--%>
</c:if>
<style type="text/css">
#delBtn{
    -webkit-transition: all 150ms linear;
    position:relative;
    left:120px;
    visibility:hidden;
}
.delBtnV{
    left:-6px !important;
    margin-left:6px;
    z-index:1000 !important;
    visibility:visible !important;
    overflow:visible !important;
}
.cHide{
    -webkit-transition: left 200ms linear !important;
}
.cShow{
    -webkit-transition: left 200ms linear !important;

}
.cRight1{
    -webkit-transition: left 200ms linear !important;

}
.persp{
    -webkit-perspective: 600;
}
.card
{
	-webkit-transform-style: preserve-3d;
    -webkit-transition-property: -webkit-transform;
	-webkit-transition-duration: 1.25s;
}
.flipped,.back
{
	-webkit-transform: rotateY(180deg);
}
</style>
</head>
<body onorientationchange="updateOrientation()">
<div class="container table" id="appbar" align="center">
    <div class="table-row">
            <%-- <div class="table-cell">--%> <c:set var="appcount" value="1"/> <c:if
            test="${mailbox.features.mail}"> <c:set var="appcount" value="${appcount+1}"/> </c:if> <c:if
            test="${mailbox.features.contacts}"> <c:set var="appcount" value="${appcount+1}"/> </c:if>
            <c:if test="${mailbox.features.calendar}"> <c:set var="appcount" value="${appcount+1}"/></c:if>
            <c:if test="${mailbox.features.briefcases || mailbox.features.notebook}"> <c:set var="appcount" value="${appcount+1}"/></c:if>
            <%--c:if test="${mailbox.features.tasks}"> <c:set var="appcount" value="${appcount+1}"/></c:if--%>
            <c:set
            var="active"
            value="${empty param.st || param.st eq 'message' || param.st eq 'conversation' || param.st eq 'folders' ? '-active' : ''}"/> <a
            style='width: ${95/appcount}%;'  accesskey="${requestScope.mailapp_accesskey}"
            id="mail" class="mail${active} appTab${active} table-cell" href="${aurl}?st=${mailbox.prefs.groupMailBy}"><span
            onclick="return zClickLink('mail')"><fmt:message
            key="mail"/></span><span onclick="return zClickLink('mail')" style="display:none;"
                                     class="apunread">${mailbox.inbox.unreadCount > 0 ? mailbox.inbox.unreadCount : ''}</span> </a> <c:if
            test="${mailbox.features.contacts}"> <c:set var="active"
                                                        value="${param.st eq 'contact' || param.st eq 'ab' ? '-active' : ''}"/>
        <a style='width: ${95/appcount}%;'  accesskey="${requestScope.contactapp_accesskey}"
           id="contact" class="contact${active} appTab${active} table-cell" href="${aurl}?st=contact"><span
                onclick="return zClickLink('contact')"><fmt:message key="contacts"/></span></a>
            </c:if>
        <c:if test="${mailbox.features.calendar}">
        <c:set var="active" value="${param.st eq 'cal' || param.st eq 'cals' ? '-active' : ''}"/>
        <a style='width: ${95/appcount}%;'  accesskey="${requestScope.calapp_accesskey}"
           id="cal" class="cal${active} appTab${active} table-cell" href="${aurl}?st=cal"><span
                onclick="return zClickLink('cal')"><fmt:message
                key="calendar"/></span>
            <span onclick="return zClickLink('cal')" style="display:none;" class="aptoday">
            <fmt:formatDate value="${zm:getToday(mailbox.prefs.timeZone).time}" timeZone="${mailbox.prefs.timeZone}"
                            pattern="EEE|d|MMM" var="today"/>
            <c:set var="darr" value="${fn:split(today,'|')}"/>
            <div class="_day">${darr[0]}</div>
            <div class="_date">${darr[1]}</div>
            <div class="_month">${darr[2]}</div>
            </span></a>
         </c:if>
         <%--c:if test="${mailbox.features.tasks}">
            <c:set var="active" value="${param.st eq 'tasks' || param.st eq 'task' ? '-active' : ''}"/>
            <a style='width: ${100/appcount}%;'  accesskey="${requestScope.taskapp_accesskey}"
               id="tasks" class="appTab${active} table-cell" href="${aurl}?st=task"><span
                    onclick="return zClickLink('cal')"><fmt:message
                    key="tasks"/></span>
            </a>
         </c:if--%>                             
         <c:if test="${mailbox.features.briefcases || mailbox.features.notebook}">
            <c:if test="${not empty param.l_view}">
                <c:set var="l_view" value="${fn:escapeXml(param.l_view)}" scope="session"/>
            </c:if>
            <c:if test="${empty sessionScope.l_view}">
            <c:set var="l_view" value="list" scope="session"/>
            </c:if>
        <c:set var="active" value="${param.st eq 'tasks' || param.st eq 'task'|| param.st eq 'briefcase' || param.st eq 'wiki' || param.st eq 'briefcases' || param.st eq 'notebooks' ? '-active' : ''}"/>
        <a style='width: ${98/appcount}%;'  accesskey="${requestScope.fldrapp_accesskey}"
           id="docs" class="folders${active} docs${active} appTab${active} table-cell" href="${aurl}?st=${mailbox.features.briefcases ? 'briefcases' : 'notebooks'}"><span
                onclick="return zClickLink('docs')"><fmt:message
                key="folders"/></span></a>
        </c:if>
        <c:set var="active" value="${param.search eq '1' ? '' : ''}"/>
        <a style='width: ${95/appcount}%;'  accesskey="${requestScope.search_accesskey}"
           id="search" class="search${active} appTab${active} table-cell"
           href="${aurl}?search=${param.search eq '1' ? '0' : '1'}&amp;${fn:replace(pageContext.request.queryString,'search=1&amp;','')}"
           onclick='return toggleElem("searchbar",this);'><span><fmt:message key="search"/></span></a>
    </div>
</div>

<div style="display:none;position:absolute;" class="container loadingIcon" id="curDiv"></div>
<div class="loadingDiv" id="loadingDiv" onclick="function(){return requestTimeout(false,'Aborted by user.');}"></div>    
</c:if>
<div class="container" id="maincontainer">
<div id="card">
<div class="front face cShow" id="front">
    <div class="container table" id="msgDiv" onclick="return toggleElem(this);">
        <c:choose> <c:when test="${not empty param.appmsg}">
            <c:set var="statusMessage" value="${fn:escapeXml(param.appmsg)}"/>
            <c:set var="statusClass" value="Info"/>
            <div id='statusdiv' class="table StatusInfo" style="width:100%;padding-left:1%;padding-right:1%">
                <span  style='width:90%;text-align:left;' class='table-cell'><fmt:message key="${fn:escapeXml(param.appmsg)}"/></span>
                <span class='SmlIcnHldr table-cell aright right Cancel'></span>
            </div>
        </c:when> <c:when test="${not empty requestScope.statusMessage}">
            <c:set var="statusMessage" value="${fn:escapeXml(requestScope.statusMessage)}"/>
            <c:set var="statusClass" value="${requestScope.statusClass}"/>
                <div id='statusdiv' class="table ${requestScope.statusClass}" style="width:100%;padding-left:1%;padding-right:1%">
                    <span class="table-cell" style='width:90%;text-align:left;'>${fn:escapeXml(requestScope.statusMessage)}</span>
                    <span class='SmlIcnHldr table-cell aright Cancel'></span>
                </div>
        </c:when> </c:choose>
    </div>
    <script type="text/javascript">if(document.location.hash&&document.location.hash!=currHash&&typeof(getXHR)=='function'&&getXHR()){GC().style.visibility='hidden';}</script>
    <div class="container table" id="searchbar" style="${param.search eq '1' ? '' : 'display:none;'}">
        <div class="table-row">
            <form method="post" accept-charset="UTF-8" action="${context_url}" class="table-cell"
                  onsubmit="if(!this.sq.value){showLoadingMsg('<fmt:message key="actionNoSearchQuerySpecified"/>',true,'Warning',1000);return false;}else{return submitForm(this);}">
                <c:if test="${not empty param.invId}"> <input type="hidden" name="invId"
                                                              value="${zm:cook(param.invId)}"/> </c:if> <input
                    type="hidden"
                    name="search"
                    value="1"/>
                <c:set var="st" value="${fn:escapeXml(param.st)}"/>
                <c:if test="${not empty st}">
                    <c:choose>
                        <c:when test="${param.st eq 'folders'}">
                            <%--<input type="hidden" name="st" value="${mailbox.prefs.groupMailBy}"/>--%>
                            <c:set var="st" value="${mailbox.prefs.groupMailBy}"/>
                        </c:when>
                         <c:when test="${param.st eq 'ab'}">
                            <%--<input type="hidden" name="st" value="contact"/>--%>
                             <c:set var="st" value="contact"/>
                        </c:when>
                        <c:when test="${param.st eq 'cals'}">
                            <%--<input type="hidden" name="st" value="cal"/>--%>
                             <c:set var="st" value="cal"/>
                        </c:when>
                        <c:when test="${param.st eq 'tasks'}">
                            <%--<input type="hidden" name="st" value="cal"/>--%>
                             <c:set var="st" value="task"/>
                        </c:when>
                        <c:when test="${param.st eq 'briefcases'}">
                            <%--<input type="hidden" name="st" value="briefcase"/>--%>
                            <c:set var="st" value="briefcase"/>
                        </c:when>
                        <c:when test="${param.st eq 'notebooks'}">
                           <%-- <input type="hidden" name="st" value="wiki"/>--%>
                            <c:set var="st" value="wiki"/>
                        </c:when>
                    </c:choose>
                </c:if>
                <input
                    type="hidden" name="crumb"
                    value="${fn:escapeXml(mailbox.accountInfo.crumb)}"/> 
                <div class="table">
                    <div class="table-row">
                          <span class="table-cell aleft" style="width:98%;">
                             <input type="text" class="searchInput" name="sq" value="${zm:cook(param.sq)}"/>
                          </span>
                          <span class="table-cell aright" style="white-space:nowrap;">
                             <input type="submit" class="searchButton zo_button" name="actionSearch"
                       value="<fmt:message key="search"/>"/>
                          </span>
                    </div>

                </div>
                <div class="table avs">
                    <div class="table-row">
                          <span class="table-cell aleft">
                    <select name="st" style="border:1px solid gray;">
                                <c:if test="${mailbox.features.mail}">
                                <option value="${mailbox.prefs.groupMailBy}" ${empty st or st eq  mailbox.prefs.groupMailBy ? 'selected="selected"' : ''}><fmt:message key="mails"/></option>
                                </c:if>
                                <c:if test="${mailbox.features.contacts}">
                                <option value="contact" ${st eq 'contact' ? 'selected=selected' : ''}><fmt:message key="contacts"/></option>
                                </c:if>
                                <c:if test="${mailbox.features.gal}">
                                <option value="gal" ${st eq 'gal' ? 'selected=selected' : ''}><fmt:message key="GAL"/></option>
                                </c:if>
                                <c:if test="${mailbox.features.calendar}">
                                <option value="cal" ${st eq 'cal' ? 'selected=selected' : ''}><fmt:message key="appointments"/></option>
                                </c:if>
                                <c:if test="${mailbox.features.tasks}">
                                <option value="task" ${st eq 'task' ? 'selected=selected' : ''}><fmt:message key="tasks"/></option>
                                </c:if>
                                <c:if test="${mailbox.features.notebook}">
                                <option value="wiki" ${st eq 'wiki' ? 'selected=selected' : ''}><fmt:message key="pages"/></option>
                                </c:if>
                                <c:if test="${mailbox.features.briefcases}">
                                <option value="briefcase" ${st eq 'briefcase' ? 'selected=selected' : ''}><fmt:message key="files"/></option>
                                </c:if>    
                            </select>
                     </span>
                     <span class="table-cell aright">
                        <a href="${context_url}?st=query&s=${st}"><fmt:message key="advancedSearch"/> </a>
                    </span>
                    </div>    
                    </div>
            </form>
        </div>
    </div>
    <div class="container table" id="savesearchbar" style="${param.saveSearch eq '1' ? '' : 'display:none;'}">
        <div class="table-row">
            <form method="post" accept-charset="UTF-8" action="${context_url}" class="table-cell"
                  onsubmit="if(!this.sname.value){showLoadingMsg('<fmt:message key="actionNoNameSpecified"/>',true,'Warning',1000);return false;}else{return submitForm(this);}">
                <input type="hidden" name="query" value="${zm:cook(param.sq)}"/>
                <input type="hidden" name="st" value="${empty param.st? mailbox.prefs.groupMailBy : (param.st eq 'cal' ? 'appointment' : zm:cook(param.st))}"/>
                <input type="hidden" name="doFolderAction" value="1"/>
                <input type="hidden" name="parentid" value="${mailbox.inbox.parentId}"/>
                <input
                        type="hidden" name="crumb"
                        value="${fn:escapeXml(mailbox.accountInfo.crumb)}"/> <%-- <span class="table-cell" width="70%">--%>
                <span class="label"><fmt:message key="searchNameLabel"/></span>
                <input type="text" class="searchInput" style="width:30%;" name="sname" value="${zm:cook(param.sname)}"/>
                <input type="submit" class="searchButton zo_button" name="actionSaveSearch"
                       value="<fmt:message key="save"/>"/><!--</span>-->
            </form>
        </div>
    </div>
    <mo:handleError>
        <div class="container" id="body">
            <c:import url="/m/zmview"/>
        </div>
    </mo:handleError>
</div>
</div>
</div>
<script type="text/javascript"> //This code runs from the ajax response
var nojs = false;
if(window != parent){
var d = document.getElementById('statusdiv');var msg = (d) ? d.innerHTML : null;
if (msg != null) {parent.showLoadingMsg(null, false);if(d.className && d.className.indexOf("StatusInfo") > -1){parent.loadThisFrameResponse(self.GC().innerHTML,self.frameElement.id);
nojs = true;}else{nojs = true;}}
}    
<c:if test="${not empty requestScope.title}">document.title = "<fmt:message key="zimbraTitleLabel"/>"+" "+"${fn:escapeXml(requestScope.title)}";</c:if>
<c:if test="${not empty requestScope.curId}">window.currentDate = '${requestScope.curId}';</c:if>
<c:if test="${not empty requestScope._today}">window._today = '${requestScope._today}';</c:if>
if(dId && dV[dId]){//hide swipe to delete button
    hideDelete(dId);
}
</script>
<c:if test="${empty param.ajax}">
    <div class="table">
        <div class="table-row">
            <div class="container table-cell" id="userinfo">
                <c:url var="logoutUrl" value="${context_url}?loginOp=logout&client=mobile"/>
            <span class="logout-span">
            <a href="${fn:escapeXml(logoutUrl)}" id="_logout" noajax='true'> <fmt:message key="logOut"/> </a>
            (${mailbox.accountInfo.attrs["uid"][0]})</span>
            <span class="quota-span">
            <fmt:message key="MO_quotaLabel"/>&nbsp;<c:set var="max" value="${mailbox.attrs.zimbraMailQuota[0]}"/>
            <fmt:message var="unlimited" key="unlimited"/>
            <fmt:message key="MO_quotaUsage"> <fmt:param value="${zm:displaySizeFractions(pageContext, mailbox.size,2)}"/> <fmt:param
                    value="${max==0 ? unlimited : zm:displaySizeFractions(pageContext, max,2)}"/> </fmt:message>
            </span>
            </div>
        </div>
    </div>
    <div class="table container" style="height:32px;">
        <div class="table-row">
            <div class="table-cell list-row">
                <a href="?st=prefs"><fmt:message key="options"/></a>
            </div>
        </div>
    </div>
    <div class="table container" style="height:30px;">
        <div class="table-row">
            <div class="table-cell list-row">
                <c:set var="v" value="${ua.isiPhone || ua.isiPod ? 'iphone' : ( ua.isIE ? 'wm6' : 'xlite')}"/>
                <fmt:message key="lowBandwidth" var="lbw"/>
                <fmt:message key="default" var="def"/>
                <fmt:message key="viewLabel"/>&nbsp;
                <c:if test="${fn:endsWith(sessionScope.zms,'xlite')}">
                    <c:set var="def" value="<a noajax='true' href='?zms=${v}&amp;limit=10'>${def}</a>"/>
                    ${def}
                </c:if>
                <c:if test="${!fn:endsWith(sessionScope.zms,'xlite')}">
                    <c:set var="lbw" value="<a noajax='true' href='?zms=xlite&amp;limit=5'>${lbw}</a>"/>
                    ${lbw}
                </c:if>
                  | <a href="?st=versions"><fmt:message key="more"/>...</a>
            </div>
        </div>
    </div>
    <div class="table">
        <div class="table-row">
            <div class="container table-cell" id="copyright_notice">
                <a noajax='true' target="_blank" href="<fmt:message key="logoURL"/>"><fmt:message
                        key="footerCopyright"/></a>
            </div>
        </div>
    </div>
    <script type="text/javascript" xml:space="preserve">
        if (typeof(getXHR)=='function'&&getXHR()) {
        <c:if test="${empty param.noframe || empty param.isiniframe}">if(!nojs && (window == parent)){//run this only from parent document
                registerOnclickHook();
                setInterval(function() { //!FIXME using SetInterval or polling will have performance issue
                    checkHash(document.location.href,'get');
                }, 350);

                <c:if test="${param.st ne 'newmail' && param.st ne 'compose' && mailbox.features.mail && (empty param.st || param.st eq mailbox.prefs.groupMailBy)}">if(document.location.hash.indexOf('newmail') < 0 && document.location.hash.indexOf('compose') < 0 ){
                    setTimeout(function() {
                        ajxReq('<c:url value="/m/zmain?st=newmail"/>',null,null,'get',true);
                    },300);
                }</c:if>
           }</c:if>    
        }
        //-->
</script>
</body></html> </c:if>

