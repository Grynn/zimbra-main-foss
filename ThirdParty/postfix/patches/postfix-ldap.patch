--- postfix-2.8.5/src/global/dict_ldap.c.orig	2011-10-26 21:36:23.231874503 -0700
+++ postfix-2.8.5/src/global/dict_ldap.c	2011-10-26 21:38:54.211869730 -0700
@@ -498,6 +498,7 @@
 static int dict_ldap_result(LDAP *ld, int msgid, int timeout, LDAPMessage **res)
 {
     struct timeval mytimeval;
+    int err;
 
     mytimeval.tv_sec = timeout;
     mytimeval.tv_usec = 0;
@@ -505,10 +506,12 @@
 #define GET_ALL 1
     if (ldap_result(ld, msgid, GET_ALL, &mytimeval, res) == -1)
 	return (dict_ldap_get_errno(ld));
-
-    if (dict_ldap_get_errno(ld) == LDAP_TIMEOUT) {
-	(void) dict_ldap_abandon(ld, msgid);
-	return (dict_ldap_set_errno(ld, LDAP_TIMEOUT));
+    if ((err = dict_ldap_get_errno(ld)) != LDAP_SUCCESS) {
+      if (err == LDAP_TIMEOUT) {
+        (void) dict_ldap_abandon(ld, msgid);
+        return (dict_ldap_set_errno(ld, LDAP_TIMEOUT));
+      }
+      return err;
     }
     return LDAP_SUCCESS;
 }
