From 31f1061538931a33d6844cda42f95e91e1b8dae8 Mon Sep 17 00:00:00 2001
From: Hallvard Furuseth <hallvard@openldap.org>
Date: Sat, 3 Mar 2012 09:49:20 +0100
Subject: [PATCH] ITS#7191 Fix mdb_xcursor_init1() unaligned access

---
 libraries/libmdb/mdb.c |    3 +--
 1 files changed, 1 insertions(+), 2 deletions(-)

diff --git a/libraries/libmdb/mdb.c b/libraries/libmdb/mdb.c
index f028ecb..2a1cbb2 100644
--- a/libraries/libmdb/mdb.c
+++ b/libraries/libmdb/mdb.c
@@ -4701,8 +4701,7 @@ mdb_xcursor_init1(MDB_cursor *mc, MDB_node *node)
 	MDB_xcursor *mx = mc->mc_xcursor;
 
 	if (node->mn_flags & F_SUBDATA) {
-		MDB_db *db = NODEDATA(node);
-		mx->mx_db = *db;
+		memcpy(&mx->mx_db, NODEDATA(node), sizeof(MDB_db));
 		mx->mx_cursor.mc_snum = 0;
 		mx->mx_cursor.mc_flags = C_SUB;
 	} else {
-- 
1.7.4.2

